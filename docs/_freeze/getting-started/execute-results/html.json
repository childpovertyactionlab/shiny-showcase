{
  "hash": "a028a37db5068d5501514111f98d430f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Getting Started\"\nsubtitle: \"Complete guide to building CPAL Shiny dashboards\"\n---\n\n\nA comprehensive guide to using CPAL-themed components in your Shiny applications. This documentation covers setup, theming, and implementation of various UI components using the `cpaltemplates` package.\n\n## Prerequisites\n\n### Required Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install cpaltemplates from GitHub\nremotes::install_github(\"childpovertyactionlab/cpaltemplates\")\n\n# Core packages\ninstall.packages(c(\n  \"shiny\",\n  \"shinyjs\",\n  \"bslib\",\n  \"bsicons\",\n  \"ggplot2\",\n  \"dplyr\",\n  \"thematic\",\n  \"gt\",\n  \"reactable\",\n  \"DT\",\n  \"shinyWidgets\"\n))\n```\n:::\n\n\n### Minimum Package Versions\n\n- R >= 4.1.0\n- shiny >= 1.7.0\n- bslib >= 0.5.0\n- cpaltemplates >= 2.6.0\n\n## Project Setup\n\n### Recommended Project Structure\n\n```\nyour-shiny-app/\n├── app.R                 # Main application file\n├── _brand.yml            # CPAL brand configuration (from cpaltemplates)\n├── .env                  # Environment variables for tokens/secrets (DO NOT COMMIT)\n├── .gitignore            # Should include .env, .Renviron\n├── R/\n│   ├── helpers.R         # Custom helper functions\n│   └── loading-spinner.R # Loading overlay component (from templates/)\n├── data/                 # Optional: only needed for local data files\n│   └── your_data.rds     # (Not needed if connecting to database)\n├── www/\n│   └── images/\n│       └── CPAL_Logo_OneColor.png\n└── views/                # Optional: modular UI files (see below)\n    ├── header-ui.R\n    └── sidebar-ui.R\n```\n\n### Quick Start with Templates\n\nThis repository includes ready-to-use template files in the `templates/` folder:\n\n| Template File | Copy To | Purpose |\n|---------------|---------|---------|\n| `templates/app-template.R` | `app.R` | Complete starter app |\n| `templates/header-template.R` | `views/header-ui.R` | Header with logo & dark mode |\n| `templates/loading-spinner-template.R` | `R/loading-spinner.R` | Loading overlay functions |\n\n### Getting the Brand File\n\nThe `_brand.yml` file can be automatically added to your project using cpaltemplates:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cpaltemplates)\n\n# This copies _brand.yml to your project root\nuse_cpal_brand()\n```\n:::\n\n\nAlternatively, copy it manually from the `cpal-shiny-showcase` repository.\n\n### Data Folder\n\nThe `data/` folder is **optional** and only needed if you're loading data from local files:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Local file approach\nyour_data <- readRDS(\"data/your_data.rds\")\n```\n:::\n\n\n**If connecting to a database** (e.g., Databricks, PostgreSQL), you don't need a data folder:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Database connection approach\nlibrary(DBI)\nlibrary(odbc)\n\ncon <- dbConnect(\n  odbc::odbc(),\n  dsn = \"your_databricks_dsn\"\n  # Or use connection string from environment variable\n)\n\nyour_data <- dbGetQuery(con, \"SELECT * FROM your_schema.your_table\")\n```\n:::\n\n\n### Environment Variables & Secrets\n\n**Never hardcode API tokens, database credentials, or secrets in your code.**\n\nCreate a `.env` file in your project root for sensitive values:\n\n```bash\n# .env file (DO NOT COMMIT TO GIT)\nMAPBOX_TOKEN=pk.eyJ1IjoiY3BhbGFuYWx5dGljcyIsImEiOi...\nDATABASE_HOST=your-databricks-host.cloud.databricks.com\nDATABASE_TOKEN=your-secret-token\n```\n\nLoad environment variables in your app:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# At the top of app.R\n# Option 1: Using dotenv package\nlibrary(dotenv)\nload_dot_env()\n\n# Option 2: Using .Renviron file (automatically loaded by R)\n# Create .Renviron file with same format as .env\n\n# Access variables\nSys.getenv(\"MAPBOX_TOKEN\")\nSys.getenv(\"DATABASE_TOKEN\")\n```\n:::\n\n\n**Important:** Add `.env` and `.Renviron` to your `.gitignore`:\n\n```\n# .gitignore\n.env\n.Renviron\n*.secrets\n```\n\n### When to Use the Views Folder\n\nThe `views/` folder is for **modular UI components**. Use it based on your app's complexity:\n\n#### Simple Apps (No Views Needed)\n\nFor small apps with minimal UI, keep everything in `app.R`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# app.R - Simple app (no views folder needed)\nui <- page_sidebar(\n  title = \"Simple Dashboard\",\n  theme = cpal_dashboard_theme(),\n  sidebar = sidebar(\n    selectInput(\"filter\", \"Filter:\", choices = c(\"A\", \"B\"))\n  ),\n  plotOutput(\"my_plot\")\n)\n```\n:::\n\n\n**Use this approach when:**\n\n- Your app has 1-2 pages/sections\n- The UI code is under ~200 lines\n- You're building a quick prototype\n- Only one person maintains the app\n\n#### Complex Apps (Use Views)\n\nFor larger apps, split UI into separate files in `views/`:\n\n```\nviews/\n├── header-ui.R           # Header with logo and dark mode toggle\n├── sidebar-ui.R          # Navigation sidebar\n├── dashboard-ui.R        # Main dashboard page\n├── analysis-ui.R         # Analysis/charts page\n├── data-tables-ui.R      # Tables page\n└── settings-ui.R         # Settings/config page\n```\n\nEach view file exports a UI element:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# views/dashboard-ui.R\ndashboard_ui <- div(\n  h1(\"Dashboard\"),\n  layout_columns(\n    col_widths = c(6, 6),\n    card(card_header(\"Chart 1\"), plotOutput(\"chart1\")),\n    card(card_header(\"Chart 2\"), plotOutput(\"chart2\"))\n  )\n)\n```\n:::\n\n\nThen source in `app.R`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# app.R - Complex app with views\nui <- page_sidebar(\n  title = source(\"views/header-ui.R\")$value,\n  theme = cpal_dashboard_theme(),\n  sidebar = source(\"views/sidebar-ui.R\")$value,\n\n  # Conditional sections\n  conditionalPanel(\n    condition = \"output.current_section == 'dashboard'\",\n    source(\"views/dashboard-ui.R\")$value\n  ),\n  conditionalPanel(\n    condition = \"output.current_section == 'analysis'\",\n    source(\"views/analysis-ui.R\")$value\n  )\n)\n```\n:::\n\n\n**Use views when:**\n\n- Your app has 3+ pages/sections\n- The UI code exceeds ~200 lines\n- Multiple people work on the app\n- You want reusable components\n- You need clear separation of concerns\n\n## Brand Configuration\n\nThe `_brand.yml` file is the foundation of CPAL theming. It defines colors, fonts, and Bootstrap defaults.\n\n### Key Color Definitions\n\n```yaml\n# Core brand colors (defined in _brand.yml)\ncolor:\n  palette:\n    midnight: \"#004855\"      # Darkest teal\n    deep_teal: \"#006878\"     # Primary brand color\n    coral: \"#E86A50\"         # Accent/warning color\n    sage: \"#5A8A6F\"          # Secondary green\n    slate: \"#5C6B73\"         # Neutral gray\n    warm_gray: \"#9BA8AB\"     # Light neutral\n    gold: \"#B8860B\"          # Highlight color\n    plum: \"#8B5E83\"          # Alternative accent\n```\n\n### Using Colors in Your Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cpaltemplates)\n\n# Get a specific color\nprimary_color <- cpal_get_color(\"deep_teal\")\n# Returns: \"#006878\"\n\n# Get the primary brand color\ncpal_get_primary_color()\n# Returns: \"#006878\"\n\n# Available color names:\n# midnight, deep_teal, coral, sage, slate, warm_gray, gold, plum,\n# teal, coral_dark, white, neutral, black\n```\n:::\n\n\n## App Theme Setup\n\n### Basic App Structure\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(shiny)\nlibrary(shinyjs)\nlibrary(bslib)\nlibrary(cpaltemplates)\n\n# Disable dev mode popups (recommended for production)\noptions(shiny.devmode = FALSE)\n\nui <- page_sidebar(\n  title = \"Your App Title\",\n  theme = cpal_dashboard_theme(),  # Apply CPAL theme\n  sidebar = sidebar(\n    # Your sidebar content\n  ),\n  useShinyjs(),  # Enable shinyjs\n  # Your main content\n)\n\nserver <- function(input, output, session) {\n  # Enable thematic for auto-theming ggplot2\n  thematic::thematic_on()\n\n  # Your server logic\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Header with Logo and Dark Mode Toggle\n\nA reusable header template is available at `templates/header-template.R`. Copy it to `views/header-ui.R` and customize:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# views/header-ui.R (copy from templates/header-template.R)\nheader_ui <- div(\n  class = \"d-flex align-items-center justify-content-between w-100\",\n\n  # Left side: logo + title\n  div(\n    class = \"d-flex align-items-center\",\n    tags$img(\n      src = \"images/CPAL_Logo_OneColor.png\",  # Place logo in www/images/\n      height = \"30\",\n      class = \"me-2\"\n    ),\n    tags$div(\"Your Dashboard Title\", class = \"header-title\")  # <- MODIFY THIS\n  ),\n\n  # Right side: dark mode toggle\n  # Options: \"light\" (default), \"dark\", or NULL (system preference)\n  input_dark_mode(id = \"dark_mode_toggle\", mode = \"light\")\n)\n```\n:::\n\n\nUse in your app:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- page_sidebar(\n  title = source(\"views/header-ui.R\")$value,\n  theme = cpal_dashboard_theme(),\n  # ...\n)\n```\n:::\n\n\n::: {.callout-note}\nMake sure to place your logo file at `www/images/CPAL_Logo_OneColor.png` or update the path accordingly.\n:::\n\n## Dark/Light Mode Support\n\n### Enabling Thematic for ggplot2\n\nThe `thematic` package automatically adjusts ggplot2 colors based on the app's theme (dark/light mode).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nserver <- function(input, output, session) {\n  # IMPORTANT: Call this at the start of your server function\n  thematic::thematic_on()\n\n  # Your plots will now auto-adjust to dark/light mode\n  output$my_plot <- renderPlot({\n    ggplot(data, aes(x, y)) +\n      geom_point() +\n      theme_cpal_auto()  # Use this theme for auto dark/light support\n  })\n}\n```\n:::\n\n\n### Theme Functions\n\n| Function | Use Case |\n|----------|----------|\n| `theme_cpal()` | Standard CPAL theme (light mode only) |\n| `theme_cpal_auto()` | Auto-adjusts to dark/light mode (recommended) |\n| `theme_cpal_dark()` | Explicit dark mode theme |\n| `theme_cpal_minimal()` | Minimal styling variant |\n| `theme_cpal_print()` | Optimized for print output |\n\n### Example: Dark Mode Compatible Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput$my_chart <- renderPlot({\n  ggplot(filtered_data(), aes(x = category, y = value, fill = group)) +\n    geom_col() +\n    scale_fill_cpal_d() +  # CPAL discrete color scale\n    labs(\n      title = \"My Chart Title\",\n      x = \"Category\",\n      y = \"Value\"\n    ) +\n    theme_cpal_auto()  # Auto dark/light mode support\n})\n```\n:::\n\n\n## Loading Spinner\n\nShow users feedback while the app initializes. A reusable template is available in `templates/loading-spinner-template.R`.\n\n### Quick Setup (Using Template)\n\n1. Copy `templates/loading-spinner-template.R` to `R/loading-spinner.R` in your project\n2. Source it and use the helper functions:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# At the top of app.R\nsource(\"R/loading-spinner.R\")\n\n# In your UI\nui <- page_sidebar(\n  # ... theme and sidebar ...\n  useShinyjs(),\n  loading_overlay_ui(message = \"Loading application...\"),  # Add this\n  # Your main content...\n)\n\n# In your server\nserver <- function(input, output, session) {\n  thematic::thematic_on()\n  setup_loading_overlay(session)  # Add this at the start\n  # Rest of server logic...\n}\n```\n:::\n\n\n### Manual Setup (Without Template)\n\nIf you prefer to implement directly without the template file:\n\n#### UI Setup\n\nAdd this to your UI, right after `useShinyjs()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- page_sidebar(\n  # ... theme and sidebar ...\n  useShinyjs(),\n\n  # Loading overlay\n  div(\n    id = \"loading_overlay\",\n    style = \"position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n             background: rgba(255,255,255,0.9); z-index: 9999;\n             display: flex; justify-content: center; align-items: center;\n             flex-direction: column;\",\n    div(\n      class = \"spinner-border text-primary\",\n      role = \"status\",\n      style = \"width: 3rem; height: 3rem;\"\n    ),\n    p(\"Loading application...\", class = \"mt-3 text-muted\")\n  ),\n\n  # Your main content\n  div(id = \"main_content\", ...)\n)\n```\n:::\n\n\n#### Server Setup\n\nHide the spinner after initialization:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nserver <- function(input, output, session) {\n  thematic::thematic_on()\n\n  # Hide loading overlay after initialization\n  session$onFlushed(function() {\n    # Optional: setup fonts (can be slow)\n    setup_cpal_google_fonts()\n\n    # Hide the spinner\n    shinyjs::hide(\"loading_overlay\", anim = TRUE, animType = \"fade\")\n  }, once = TRUE)\n\n  # Rest of server logic...\n}\n```\n:::\n\n\n### Customizing the Spinner\n\nThe template function accepts customization parameters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Custom message and colors\nloading_overlay_ui(\n  message = \"Connecting to database...\",\n  spinner_color = \"text-primary\",      # Bootstrap color class\n  background = \"rgba(255,255,255,0.95)\" # Semi-transparent white\n)\n\n# Skip font setup for faster loading\nsetup_loading_overlay(session, setup_fonts = FALSE)\n```\n:::\n\n\n## Static Charts (ggplot2)\n\n### Color Scales\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Discrete (categorical) colors\nscale_color_cpal_d()  # For points, lines\nscale_fill_cpal_d()   # For bars, areas\n\n# Continuous colors\nscale_color_cpal_c()  # For continuous color gradients\nscale_fill_cpal_c()   # For continuous fill gradients\n\n# Manual color selection\nscale_fill_manual(values = c(\n  cpal_get_color(\"deep_teal\"),\n  cpal_get_color(\"coral\"),\n  cpal_get_color(\"sage\")\n))\n```\n:::\n\n\n### Scatter Plot Example\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput$scatter_plot <- renderPlot({\n  ggplot(data, aes(x = income, y = poverty_rate, color = category)) +\n    geom_point(size = 3, alpha = 0.8) +\n    geom_smooth(method = \"lm\", se = TRUE) +\n    scale_color_cpal_d() +\n    scale_x_continuous(labels = scales::dollar_format()) +\n    labs(\n      title = \"Income vs Poverty Rate\",\n      subtitle = \"By County Category\",\n      x = \"Median Household Income\",\n      y = \"Poverty Rate (%)\",\n      color = \"Category\"\n    ) +\n    theme_cpal_auto()\n})\n```\n:::\n\n\n### Bar Chart Example\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput$bar_chart <- renderPlot({\n  ggplot(summary_data, aes(x = category, y = count, fill = category)) +\n    geom_col(alpha = 0.9) +\n    geom_text(aes(label = count), vjust = -0.5, fontface = \"bold\") +\n    scale_fill_cpal_d() +\n    labs(\n      title = \"Distribution by Category\",\n      x = \"Category\",\n      y = \"Count\"\n    ) +\n    theme_cpal_auto() +\n    theme(\n      axis.text.x = element_text(angle = 45, hjust = 1),\n      legend.position = \"none\"\n    )\n})\n```\n:::\n\n\n### Heatmap with Diverging Colors\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput$heatmap <- renderPlot({\n  ggplot(cor_data, aes(x = var1, y = var2, fill = correlation)) +\n    geom_tile(color = \"white\") +\n    geom_text(aes(label = round(correlation, 2)), fontface = \"bold\") +\n    scale_fill_gradient2(\n      low = cpal_get_color(\"coral\"),      # Negative values\n      mid = \"white\",                       # Zero/neutral\n      high = cpal_get_color(\"deep_teal\"), # Positive values\n      midpoint = 0,\n      limits = c(-1, 1)\n    ) +\n    labs(title = \"Correlation Matrix\") +\n    theme_cpal_auto() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n})\n```\n:::\n\n\n## Input Components\n\n### Standard Shiny Inputs with CPAL Theming\n\nThe `cpal_dashboard_theme()` automatically styles standard Shiny inputs. No additional code needed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# These are automatically styled by _brand.yml\ntextInput(\"name\", \"Your Name:\")\nnumericInput(\"age\", \"Age:\", value = 25, min = 0, max = 120)\nselectInput(\"state\", \"State:\", choices = c(\"Texas\", \"Oklahoma\", \"Louisiana\"))\nsliderInput(\"range\", \"Range:\", min = 0, max = 100, value = c(25, 75))\ndateRangeInput(\"dates\", \"Date Range:\")\ncheckboxInput(\"agree\", \"I agree to terms\")\nradioButtons(\"choice\", \"Select one:\", choices = c(\"A\", \"B\", \"C\"))\n```\n:::\n\n\n### shinyWidgets Enhanced Inputs\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(shinyWidgets)\n\n# Pretty checkboxes with CPAL colors\nprettyCheckboxGroup(\n  \"options\",\n  \"Select Options:\",\n  choices = c(\"Option A\", \"Option B\", \"Option C\"),\n  status = \"primary\",\n  shape = \"curve\"\n)\n\n# Picker input with search\npickerInput(\n  \"multi_select\",\n  \"Choose Items:\",\n  choices = list(\n    \"Group 1\" = c(\"Item A\", \"Item B\"),\n    \"Group 2\" = c(\"Item C\", \"Item D\")\n  ),\n  multiple = TRUE,\n  options = list(`actions-box` = TRUE)\n)\n\n# Air datepicker\nairDatepickerInput(\n  \"date\",\n  \"Select Date:\",\n  multiple = FALSE,\n  clearButton = TRUE\n)\n\n# Progress bars\nprogressBar(\n  id = \"progress1\",\n  value = 75,\n  status = \"primary\",\n  display_pct = TRUE\n)\n```\n:::\n\n\n## Buttons and Actions\n\n### Primary Actions\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Primary button (uses CPAL deep_teal)\nactionButton(\"submit\", \"Submit\", class = \"btn-primary\")\n\n# Secondary/outline button\nactionButton(\"cancel\", \"Cancel\", class = \"btn-outline-secondary\")\n\n# Danger button\nactionButton(\"delete\", \"Delete\", class = \"btn-danger\")\n\n# Button with icon\nactionButton(\n  \"refresh\",\n  tagList(bsicons::bs_icon(\"arrow-clockwise\"), \"Refresh\"),\n  class = \"btn-primary\"\n)\n```\n:::\n\n\n### Download Button\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# UI\ndownloadButton(\"download_data\", \"Download CSV\", class = \"btn-primary\")\n\n# Server\noutput$download_data <- downloadHandler(\n  filename = function() {\n    paste(\"data_\", Sys.Date(), \".csv\", sep = \"\")\n  },\n  content = function(file) {\n    write.csv(filtered_data(), file, row.names = FALSE)\n  }\n)\n```\n:::\n\n\n### Button Groups\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiv(\n  class = \"btn-group\",\n  role = \"group\",\n  actionButton(\"btn1\", \"Option 1\", class = \"btn-outline-primary\"),\n  actionButton(\"btn2\", \"Option 2\", class = \"btn-outline-primary\"),\n  actionButton(\"btn3\", \"Option 3\", class = \"btn-outline-primary\")\n)\n```\n:::\n\n\n## Typography\n\n### Headings\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiv(\n  h1(\"Main Page Title\"),\n  h2(\"Section Heading\"),\n  h3(\"Subsection\"),\n  p(\"Body text paragraph.\", class = \"lead\"),  # Larger intro text\n  p(\"Regular paragraph text.\"),\n  p(\"Small helper text.\", class = \"small text-muted\")\n)\n```\n:::\n\n\n### Text Utilities\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Colored text using Bootstrap classes\np(\"Primary colored text\", class = \"text-primary\")\np(\"Muted/secondary text\", class = \"text-muted\")\np(\"Success text\", class = \"text-success\")\np(\"Warning text\", class = \"text-warning\")\np(\"Danger text\", class = \"text-danger\")\n\n# Font weights\ntags$strong(\"Bold text\")\ntags$em(\"Italic text\")\ntags$code(\"Code snippet\")\n\n# Custom CPAL colored text\np(style = paste0(\"color: \", cpal_get_color(\"coral\")), \"Coral colored text\")\n```\n:::\n\n\n### Cards with Headers\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncard(\n  card_header(\n    class = \"bg-primary text-white\",\n    \"Card Title\"\n  ),\n  card_body(\n    p(\"Card content goes here.\"),\n    actionButton(\"card_action\", \"Take Action\", class = \"btn-primary\")\n  )\n)\n```\n:::\n\n\n## Data Tables\n\n### GT Tables (Static/Print-Ready)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gt)\n\noutput$gt_table <- render_gt({\n  data %>%\n    select(name, value, category) %>%\n    head(10) %>%\n    cpal_table_gt(\n      title = \"Summary Table\",\n      subtitle = \"Top 10 Records\"\n    ) %>%\n    fmt_number(columns = value, decimals = 1) %>%\n    cols_label(\n      name = \"Name\",\n      value = \"Value\",\n      category = \"Category\"\n    )\n})\n```\n:::\n\n\n### GT Tables (Interactive with Pagination)\n\n\n::: {.cell}\n\n```{.r .cell-code}\noutput$gt_interactive <- render_gt({\n  data %>%\n    cpal_table_gt(\n      title = \"Interactive Table\",\n      subtitle = \"With search and pagination\"\n    ) %>%\n    opt_interactive(\n      use_pagination = TRUE,\n      use_page_size_select = TRUE,\n      page_size_default = 10,\n      use_search = TRUE\n    ) %>%\n    opt_row_striping()\n})\n```\n:::\n\n\n### Reactable Tables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(reactable)\n\noutput$reactable_table <- renderReactable({\n  data %>%\n    cpal_table_reactable(\n      searchable = TRUE,\n      pagination = TRUE,\n      filterable = TRUE,\n      striped = TRUE,\n      highlight = TRUE,\n      columns = list(\n        name = colDef(name = \"Name\", sticky = \"left\"),\n        value = colDef(\n          name = \"Value\",\n          format = colFormat(digits = 1)\n        ),\n        income = colDef(\n          name = \"Income\",\n          format = colFormat(prefix = \"$\", separators = TRUE)\n        )\n      )\n    )\n})\n```\n:::\n\n\n### DT DataTables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DT)\n\noutput$dt_table <- DT::renderDataTable({\n  DT::datatable(\n    data,\n    options = list(\n      pageLength = 15,\n      scrollX = TRUE,\n      search = list(regex = TRUE)\n    ),\n    filter = \"top\",\n    rownames = FALSE\n  ) %>%\n    DT::formatRound(columns = \"value\", digits = 1) %>%\n    DT::formatCurrency(columns = \"income\", digits = 0)\n})\n```\n:::\n\n\n## Interactive Charts & Maps (TBD)\n\n::: {.callout-warning}\nThis section is under development and will cover:\n\n- **Highcharter** - Interactive JavaScript charts\n- **Mapbox/mapgl** - Interactive choropleth maps\n\nCheck back for updates or refer to the `cpal-shiny-showcase` app for current implementations.\n:::\n\n## Complete Example App\n\nA complete starter template is available at `templates/app-template.R`. Copy it to start a new project quickly.\n\nHere's a minimal but complete example incorporating the key CPAL components:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# app.R - Minimal CPAL Shiny App Example\n\nlibrary(shiny)\nlibrary(shinyjs)\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(thematic)\nlibrary(cpaltemplates)\n\n# Suppress dev mode popups\noptions(shiny.devmode = FALSE)\n\n# Sample data\nsample_data <- data.frame(\n  category = rep(c(\"A\", \"B\", \"C\", \"D\"), each = 25),\n  value = c(rnorm(25, 10, 2), rnorm(25, 15, 3),\n            rnorm(25, 12, 2.5), rnorm(25, 18, 4)),\n  group = sample(c(\"Group 1\", \"Group 2\"), 100, replace = TRUE)\n)\n\n# UI\nui <- page_sidebar(\n  title = div(\n    class = \"d-flex align-items-center justify-content-between w-100\",\n    div(\"CPAL Dashboard Example\"),\n    input_dark_mode(id = \"dark_mode\", mode = \"light\")\n  ),\n  theme = cpal_dashboard_theme(),\n\n  sidebar = sidebar(\n    title = \"Filters\",\n    selectInput(\"category\", \"Category:\",\n                choices = c(\"All\", \"A\", \"B\", \"C\", \"D\")),\n    sliderInput(\"range\", \"Value Range:\",\n                min = 0, max = 30, value = c(5, 25)),\n    actionButton(\"reset\", \"Reset Filters\", class = \"btn-outline-secondary\")\n  ),\n\n  useShinyjs(),\n\n  # Loading spinner\n  div(\n    id = \"loading_overlay\",\n    style = \"position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n             background: rgba(255,255,255,0.9); z-index: 9999;\n             display: flex; justify-content: center; align-items: center;\",\n    div(class = \"spinner-border text-primary\", role = \"status\")\n  ),\n\n  # Main content\n  layout_columns(\n    col_widths = c(6, 6),\n    card(\n      card_header(\"Distribution by Category\"),\n      plotOutput(\"bar_chart\", height = \"300px\")\n    ),\n    card(\n      card_header(\"Value Distribution\"),\n      plotOutput(\"box_plot\", height = \"300px\")\n    )\n  )\n)\n\n# Server\nserver <- function(input, output, session) {\n  thematic::thematic_on()\n\n  # Hide spinner on load\n  session$onFlushed(function() {\n    setup_cpal_google_fonts()\n    shinyjs::hide(\"loading_overlay\", anim = TRUE, animType = \"fade\")\n  }, once = TRUE)\n\n  # Filtered data\n  filtered_data <- reactive({\n    data <- sample_data %>%\n      filter(value >= input$range[1], value <= input$range[2])\n\n    if (input$category != \"All\") {\n      data <- data %>% filter(category == input$category)\n    }\n    data\n  })\n\n  # Bar chart\n  output$bar_chart <- renderPlot({\n    filtered_data() %>%\n      count(category) %>%\n      ggplot(aes(x = category, y = n, fill = category)) +\n      geom_col() +\n      scale_fill_cpal_d() +\n      labs(title = \"Count by Category\", x = NULL, y = \"Count\") +\n      theme_cpal_auto() +\n      theme(legend.position = \"none\")\n  })\n\n  # Box plot\n  output$box_plot <- renderPlot({\n    ggplot(filtered_data(), aes(x = group, y = value, fill = group)) +\n      geom_boxplot(alpha = 0.8) +\n      scale_fill_cpal_d() +\n      labs(title = \"Value by Group\", x = NULL, y = \"Value\") +\n      theme_cpal_auto() +\n      theme(legend.position = \"none\")\n  })\n\n  # Reset button\n  observeEvent(input$reset, {\n    updateSelectInput(session, \"category\", selected = \"All\")\n    updateSliderInput(session, \"range\", value = c(5, 25))\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n## Troubleshooting\n\n### Common Issues\n\n**Fonts not loading:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Make sure to call this in your server function\nsetup_cpal_google_fonts()\n```\n:::\n\n\n**Dark mode not affecting plots:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ensure thematic is enabled before any renderPlot\nthematic::thematic_on()\n\n# Use theme_cpal_auto() instead of theme_cpal()\n```\n:::\n\n\n**Colors not matching brand:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Always use cpaltemplates color functions\ncpal_get_color(\"deep_teal\")  # Correct\n\"#006878\"                     # Avoid hardcoding\n```\n:::\n\n\n**GT table ID warnings:**\n\nThis is expected when using `opt_interactive()`. Suppress with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(shiny.devmode = FALSE)\n```\n:::\n\n\n## Additional Resources\n\n- [cpaltemplates Package](https://github.com/childpovertyactionlab/cpaltemplates)\n- [CPAL Shiny Showcase](https://github.com/childpovertyactionlab/cpal-shiny-showcase)\n- [bslib Documentation](https://rstudio.github.io/bslib/)\n- [Shiny Documentation](https://shiny.posit.co/)\n",
    "supporting": [
      "getting-started_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}